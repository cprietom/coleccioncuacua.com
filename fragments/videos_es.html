<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<script type="text/javascript">
var cuacua_url_base = window.location.protocol + "//" + window.location.host;

function fillSection(sectionId, sectionTitle, arrayItems, linkToAllText, linkToAllURI, buildItem) {
	if ($("#" + sectionId).length) {
		var lang = $("html").attr("lang")
		// Assign title to section
		$("#" + sectionId + "-title").text(sectionTitle);
		// Create divs with items of section
		arrayItems.forEach(function(value, index, array) {
			var innerDiv = buildItem(sectionId, linkToAllURI, value, index, array);
			$("#" + sectionId + "-row").append(innerDiv);
		});
		// Assign 'view all' text and link
		$("#" + sectionId + "-all").text(linkToAllText);
		$("#" + sectionId + "-all").attr("href", cuacua_url_base + "/" + lang + linkToAllURI);
	}
}
</script>

<section id="_videos" class="featured-products clearfix">
	<div class="container">
		<div class="product-section-title">
			<h1 id="_videos-title">Últimos vídeos</h1>
		</div>
		<div class="products-grid">
			<div class="row">
				<div id="_videos-row" class="products owl-theme owl-carousel product-slider">
				  </div>
			</div>
			<a id="_videos-all" class="all-product-link float-xs-left float-md-right h6" href="#">Ver todos los vídeos</a>
		</div>
	</div>
</section>

<script type="text/javascript">
function buildVideoItem(sectionId, linkToAllURI, value, index, array) {
  var _link = cuacua_url_base + "/" + $("html").attr("lang") + linkToAllURI + "#" + sectionId + "-" + index;
  return "<div id='" + sectionId + "-" + index +"' class='product-item'>" +
	"<article class='product-miniature js-product-miniature' " +
		"itemscope='' itemtype='http://schema.org/Product'>" +
		"<div class='thumbnail-container'>" +
			"<div class='product-image-block'>" +
				"<div style='position: relative; padding-top: 56.25%;''>" +
				"<iframe id='" + sectionId + "_iframe" + index + "'" +
					"style='position: absolute; top: 0; left: 0; width: 100%; height: 100%;'" +
					"src='#'" +
					"frameborder='0'" +
					"allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture'" +
					"allowfullscreen='allowfullscreen'></iframe>" +
				"</div>" +				
			"</div>" +
			"<div>" +
				"<h1 class='h3 product-title' itemprop='name'>" +
					"<a id='" + sectionId +"_link-" + index + "' href='" + _link + "'>" + value + "</a>" +
				"</h1>" +
			"</div>" +
		"</div>" +
	"</article>" +
	"</div>";
}

var section_id = "_videos";
var section_title = "Últimos vídeos";
var section_items = ["El tigre Cuacuá (español)", "Cuacua Tiger (inglés)", "Roar Squirrel (inglés)"];
var section_link_to_all_text = "Ver todos los vídeos";
var section_link_to_all_uri = "/content/8-videos";

fillSection(section_id,
		section_title,
		section_items,
		section_link_to_all_text,
		section_link_to_all_uri,
		buildVideoItem);
		
var youtube_hashes = ["ZndHigMZVjg", "sHh_4X2PoTA", "IO8AxJz2EmY"];
youtube_hashes.forEach(function(value, index, array) {
	$("#" + section_id + "_iframe" + index).attr("src", "https://www.youtube.com/embed/" + value);
	$("#" + section_id + "-" + index).parent().attr("style", "margin-right: 20px");
});


</script>