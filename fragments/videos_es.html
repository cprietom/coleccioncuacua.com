<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<script type="text/javascript">
	var cuacua_lang = $("html").attr("lang");
	var videos_section_title = "Latest videos";
	var videos_section_link_to_all_text = "See all videos";
</script>

<section id="_videos" class="featured-products clearfix">
	<div class="container">
		<div class="product-section-title">
			<h1 id="_videos-title">Últimos vídeos</h1>
		</div>
		<div class="products-grid">
			<div class="row">
				<div id="_videos-row" class="products owl-theme owl-carousel product-slider">
				</div>
			</div>
			<a id="_videos-all" class="all-product-link float-xs-left float-md-right h6" href="#">Ver todos los vídeos</a>
		</div>
	</div>
</section>

<script type="text/javascript">
	function buildVideoItem(sectionId, linkToAllURI, value, index, array) {
		var _link = cuacua_url_base + "/" + cuacua_lang + linkToAllURI + "#" + sectionId + "-" + index;
		return "<div id='" + sectionId + "-" + index +"' class='product-item'>" +
				"<article class='product-miniature js-product-miniature' " +
				"itemscope='' itemtype='http://schema.org/Product'>" +
				"<div class='thumbnail-container'>" +
				"<div class='product-image-block'>" +
				"<div>" +
				"<iframe id='" + sectionId + "_iframe" + index + "'" +
				"style='width: 100%; height: 100%;'" +
				"src='#'" +
				"frameborder='0'" +
				"allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture'" +
				"allowfullscreen='allowfullscreen'></iframe>" +
				"</div>" +
				"</div>" +
				"<div>" +
				"<h1 class='h3 product-title' itemprop='name'>" +
				"<a id='" + sectionId +"_link-" + index + "' href='" + _link + "'>" + value + "</a>" +
				"</h1>" +
				"</div>" +
				"</div>" +
				"</article>" +
				"</div>";
	}

	function fillSection(sectionId, sectionTitle, arrayItems, linkToAllText, linkToAllURI, buildItem) {
		if ($("#" + sectionId).length) {
			// Assign title to section
			$("#" + sectionId + "-title").text(sectionTitle);
			// Create divs with items of section
			arrayItems.forEach(function(value, index, array) {
				var innerDiv = buildItem(sectionId, linkToAllURI, value, index, array);
				$("#" + sectionId + "-row").append(innerDiv);
			});
			// Assign 'view all' text and link
			$("#" + sectionId + "-all").text(linkToAllText);
			$("#" + sectionId + "-all").attr("href", cuacua_url_base + "/" + cuacua_lang + linkToAllURI);
		}
	}

	fillSection("_videos",
			videos_section_title,
			(cuacua_lang == "es") ? videos_section_items[0] : videos_section_items[1],
			videos_section_link_to_all_text,
			"/content/8-videos",
			buildVideoItem);

	videos_section_youtube_ids.forEach(function(value, index, array) {
		$("#" + section_id + "_iframe" + index).attr("src", "https://www.youtube.com/embed/" + value);
	});
</script>